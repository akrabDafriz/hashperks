| Feature          | Endpoint                          | Method | Auth Required | Request Body                                                                                                                                 | Success Response (2xx)                                                                                                                                                                                                                            | Error Response(s)                                                                                                                                                              |
|------------------|-----------------------------------|--------|---------------|----------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Authentication** |                                   |        |               |                                                                                                                                              |                                                                                                                                                                                                                                                                 |                                                                                                                                                                                |
| Register User    | `/api/auth/register`              | POST   | No            | `{"name": "string", "email": "string", "password": "string", "role": "string ('business_owner' or 'customer')", "wallet_address": "string"}` | `201: {"id": "integer", "email": "string", "role": "string"}`                                                                                                                                                                                   | `500: {"error": "Registration failed", "detail": "string"}`                                                                                                                    |
| Login User       | `/api/auth/login`                 | POST   | No            | `{"email": "string", "password": "string"}`                                                                                                  | `200: {"token": "string (JWT)"}`                                                                                                                                                                                                                    | `404: {"error": "User not found"}`, `401: {"error": "Invalid password"}`, `500: {"error": "Login failed", "detail": "string"}`                                                |
| Get User Account | `/api/auth/:id`                   | GET    | Token         | None                                                                                                                                         | `200: {"id": "integer", "name": "string", "email": "string", "role": "string", "wallet_address": "string"}`                                                                                                                                | `404: {"error": "Account not found"}`, `401/403: Token errors`, `500: {"error": "Failed to fetch account"}`                                                                       |
| Update User Account | `/api/auth/:id`                | PUT    | Token         | `{"name": "string", "wallet_address": "string"}`                                                                                             | `200: Updated user object (all fields from users table)`                                                                                                                                                                                          | `401/403: Token errors`, `500: {"error": "Failed to update account"}`                                                                                                             |
| Delete User Account | `/api/auth/:id`                | DELETE | Token         | None                                                                                                                                         | `204: No Content`                                                                                                                                                                                                                                 | `401/403: Token errors`, `500: {"error": "Failed to delete account"}`                                                                                                            |
| **Stores** |                                   |        |               |                                                                                                                                              |                                                                                                                                                                                                                                                                 |                                                                                                                                                                                |
| Get All Stores   | `/api/stores`                     | GET    | No            | None                                                                                                                                         | `200: [{"id": "integer", "business_name": "string", ..., "owner_name": "string"}]`                                                                                                                                                              | `500: {"error": "Failed to fetch stores", "detail": "string"}`                                                                                                                 |
| Get Store By ID  | `/api/stores/:id`                 | GET    | No            | None                                                                                                                                         | `200: {"id": "integer", "user_id": "integer", "business_name": "string", ...}`                                                                                                                                                                 | `404: {"error": "Store not found"}`, `500: {"error": "Failed to fetch store"}`                                                                                                  |
| Create Store     | `/api/stores`                     | POST   | Implied Token | `{"user_id": "integer", "business_name": "string", "description": "string", "location": "string"}`                                          | `201: Created store object`                                                                                                                                                                                                                       | `500: {"error": "Failed to create store"}`                                                                                                                                   |
| Update Store     | `/api/stores/:id`                 | PUT    | Implied Token | `{"business_name": "string", "description": "string", "location": "string"}`                                                                | `200: Updated store object`                                                                                                                                                                                                                       | `500: {"error": "Failed to update store"}`                                                                                                                                   |
| Delete Store     | `/api/stores/:id`                 | DELETE | Implied Token | None                                                                                                                                         | `204: No Content`                                                                                                                                                                                                                                 | `500: {"error": "Failed to delete store"}`                                                                                                                                   |
| Get Loyalty Programs by Store | `/api/stores/:id/loyalty`      | GET    | No            | None                                                                                                                                         | `200: [{"id": "integer", "program_name": "string", ...}]`                                                                                                                                                                                       | `500: {"error": "Failed to fetch loyalty programs", "detail": "string"}`                                                                                                       |
| **Loyalty Programs** |                               |        |               |                                                                                                                                              |                                                                                                                                                                                                                                                                 |                                                                                                                                                                                |
| Create Loyalty Program | `/api/store/:id/loyalty`        | POST   | Token         | `{"program_name": "string", "description": "string", "token_exchange_rate": "numeric"}`                                                    | `201: Created loyalty program object`                                                                                                                                                                                                             | `401/403: Token errors`, `500: {"error": "Failed to create loyalty program", "detail": "string"}`                                                                               |
| Get Loyalty Program | `/api/store/:id/loyalty/:lid`   | GET    | No            | None                                                                                                                                         | `200: Loyalty program object`                                                                                                                                                                                                                       | `404: {"error": "Loyalty program not found"}`, `500: {"error": "Failed to fetch loyalty program"}`                                                                              |
| Update Loyalty Program | `/api/store/:id/loyalty/:lid` | PUT    | No (Consider Auth) | `{"program_name": "string", "description": "string", "token_exchange_rate": "numeric"}`                                                 | `200: Updated loyalty program object`                                                                                                                                                                                                             | `500: {"error": "Failed to update loyalty program"}`                                                                                                                           |
| Delete Loyalty Program | `/api/store/:id/loyalty/:lid` | DELETE | No (Consider Auth) | None                                                                                                                                      | `204: No Content`                                                                                                                                                                                                                                 | `500: {"error": "Failed to delete loyalty program"}`                                                                                                                           |
| **Memberships** |                                   |        |               |                                                                                                                                              |                                                                                                                                                                                                                                                                 |                                                                                                                                                                                |
| Join Membership  | `/api/store/:id/membership`       | POST   | Token         | None                                                                                                                                         | `201: Created membership object`                                                                                                                                                                                                                  | `404: {"error": "Loyalty program not found..."}`, `400: {"error": "Already joined..."}`, `401/403: Token errors`, `500: {"error": "Failed to join...", "detail": "string"}` |
| List Memberships for Store | `/api/store/:id/membership` | GET  | No            | None                                                                                                                                         | `200: [{"id": "integer", ..., "customer_name": "string"}]`                                                                                                                                                                                     | `500: {"error": "Failed to fetch memberships"}`                                                                                                                                |
| **Transactions** |                                   |        |               |                                                                                                                                              |                                                                                                                                                                                                                                                                 |                                                                                                                                                                                |
| Create Transaction | `/api/transactions` or `/api/transaction` | POST | Token    | `{"membership_id": "integer", "transaction_type": "string ('earn' or 'redeem')", "amount": "numeric"}`                                     | `201: Created transaction object`                                                                                                                                                                                                                 | `400: {"error": "Invalid transaction type" or "Insufficient token..."}`, `404: {"error": "Membership not found"}`, `401/403: Token errors`, `500: {"error": "Failed to create...", "detail": "string"}` |
| Get Transaction History | `/api/transactions/:membership_id` or `/api/transaction/:membership_id` | GET | Token | None                                                                                                        | `200: [{"id": "integer", "transaction_type": "string", ...}]`                                                                                                                                                                                | `401/403: Token errors`, `500: {"error": "Failed to fetch transaction history", "detail": "string"}`                                                                        |
| **Token** |                                   |        |               |                                                                                                                                              |                                                                                                                                                                                                                                                                 |                                                                                                                                                                                |
| Get Token Balance | `/api/token/:user_id`            | GET    | Token         | None                                                                                                                                         | `200: {"wallet_address": "string", "token_balance": "string"}`                                                                                                                                                                             | `404: {"error": "User not found"}`, `401/403: Token errors`, `500: {"error": "Failed to get token balance", "detail": "string"}`                                              |